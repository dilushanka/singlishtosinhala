var darkSwitch = document.getElementById("darkSwitch");

window.addEventListener("load", function () {
  if (darkSwitch) {
    initTheme();
    darkSwitch.addEventListener("change", function () {
      resetTheme();
    });
  }
});

function initTheme() {
  var savedTheme = localStorage.getItem("darkSwitch");

  // Set data-theme attribute based on user's explicit preference
  if (savedTheme === "dark") {
    document.body.setAttribute("data-theme", "dark");
    darkSwitch.checked = true;
  } else {
    document.body.removeAttribute("data-theme");
    darkSwitch.checked = false;
  }
}

function resetTheme() {
  if (darkSwitch.checked) {
    document.body.setAttribute("data-theme", "dark");
    localStorage.setItem("darkSwitch", "dark");
  } else {
    document.body.removeAttribute("data-theme");
    localStorage.removeItem("darkSwitch");
  }
}
